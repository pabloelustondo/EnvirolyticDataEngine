@model JassWeather.Models.JassGridValues
@using JassWeather.Models

@{
    ViewBag.Title = "Index";
}
<style>

table { table-layout: fixed; }
th, td { width: 2px; font-size:xx-small}

</style>

<h2>Values on File @ViewBag.fileName for time==0 level==0</h2>
Max Value:  @Model.measureMax[0]  Min Value : @Model.measureMin[0] MaxPosition Y:@Model.maxY[0] X:@Model.maxX[0]  MinPosition Y:@Model.minY[0] X:@Model.minX[0]

<table><tr>
@foreach (var v in Model.variableMetadata)
{
    <td>@v.Key<text>:</text>@v.Value</td>
}
</tr></table>
Color Scale

<table><tr>
@{
    double range = Model.measureMax[0] - Model.measureMin[0];
    double myfactor = (range>0)? (1024 / range):1;
    int start, end;

        start = 0;
        end = 1024;
    }




    @for (var c = start; c < end; c++ )
    {JassRGB rgb = JassWeatherAPI.rgb(c,start,end);
    <td style="background-color:rgb(@rgb.r,@rgb.g,@rgb.b)">
        @(c*range/1024 + Model.measureMin[0])</td>
    }

    }
</tr></table>

<table>
    <tr>
        <th>
            Y
        </th>
        @for (int x = 0; x < Model.xLength; x++ ){
        <th>
            @x
        </th>
        }
    </tr>

@for (int y = Model.yLength-1; y >= 0 ; y--)
{
    <tr>
        <td>
            @y
        </td>
           @for (int x = 0; x < Model.xLength; x++ ){
               JassWeather.Models.JassRGB rgb;
               if (Model.measure[0, 0, y, x] != null)
               {
                   double scaledValue = ((double)Model.measure[0, 0, y, x] - Model.measureMin[0]) * myfactor;
                   rgb = JassWeather.Models.JassWeatherAPI.rgb(scaledValue, 0, 1024);
               }
               else
               {
                   rgb = new JassRGB(0,0,0);
               }
        <td style="background-color:rgb(@rgb.r,@rgb.g,@rgb.b)">
            @Model.measure[0,0,y,x]
        </td>
            }
    </tr>
}

</table>

